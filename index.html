<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Pop-up amorgen</title>

<!-- SweetAlert2 CDN -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

<style>
  body {
    background-color: #fff6d7;
    font-family: Consolas, monospace;
    font-weight: bold;
    display: flex;
    align-items: center;
    justify-content: center;
    height: 100vh;
    margin: 0;
  }

  .swal2-popup {
    border: 3px solid black !important;
    border-radius: 8px !important;
    background-color: #fffbea !important;
    box-shadow: none !important;
    max-width: 90% !important;
    padding: 15px !important;
  }

  .swal2-title {
    color: #f85b2c !important;
    font-size: clamp(16px, 4vw, 20px) !important;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    margin-top: 6px !important;
    text-align: center;
  }

  .progress-bar {
    width: 100%;
    height: 14px;
    border: 3px solid black;
    border-radius: 8px;
    background-color: #fffbea;
    overflow: hidden;
    margin-top: 15px;
  }

  .progress-fill {
    width: 0%;
    height: 100%;
    background-color: #03c9ad;
    border-right: 3px solid black;
    transition: width 0.7s linear;
  }

  .swal2-confirm, .swal2-cancel {
    font-family: Consolas, monospace !important;
    font-weight: bold !important;
    border: 3px solid black !important;
    border-radius: 8px !important;
    background-color: #febf12 !important;
    color: black !important;
    box-shadow: none !important;
    font-size: clamp(13px, 3.5vw, 15px) !important;
    padding: 8px 20px !important;
  }

  .popup-row {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    margin-top: 10px;
  }

  .popup-row img {
    width: 40px;
    height: auto;
    flex-shrink: 0;
  }

  .bubble {
    border: 3px solid black;
    background-color: #fffbea;
    border-radius: 8px;
    padding: 10px 14px;
    color: black;
    white-space: pre-line;
    font-size: clamp(14px, 3.5vw, 16px);
    max-width: 240px;
  }

  .typing::after {
    content: '|';
    animation: blink 1s infinite;
  }

  @keyframes blink {
    50% { opacity: 0; }
  }

  @media (max-width: 500px) {
    .swal2-popup {
      padding: 10px !important;
    }
    .popup-row img {
      width: 34px;
    }
  }
</style>
</head>
<body>
<script>
async function typeText(element, text, delay, afterTyping) {
  element.textContent = "";
  for (let i = 0; i < text.length; i++) {
    element.textContent += text[i];
    await new Promise(r => setTimeout(r, delay));
  }
  if (afterTyping) afterTyping();
}

async function showLoadingPopup() {
  const swal = Swal.fire({
    title: `<img src="./img/hourglass.png" style="width:22px;vertical-align:middle;margin-right:6px;">CARREGANDO...`,
    html: `
      <div class="progress-bar">
        <div id="progress" class="progress-fill"></div>
      </div>
    `,
    showConfirmButton: false,
    showCancelButton: true,
    cancelButtonText: "CANCELAR",
    allowOutsideClick: false,
    didOpen: () => simulateProgress()
  });

  async function simulateProgress() {
    const progress = document.getElementById("progress");
    for (let i = 0; i < 3; i++) {
      progress.style.width = "0%";
      await new Promise(r => setTimeout(r, 200));
      progress.style.width = "100%";
      await new Promise(r => setTimeout(r, 1000));
    }
    showQuestionPopup();
  }
}

async function showQuestionPopup() {
  const result = await Swal.fire({
    title: `<img src="./img/interrogation-mark.png" style="width:22px;vertical-align:middle;margin-right:6px;">JÁ ESTAMOS NAMORANDO?`,
    showCancelButton: true,
    confirmButtonText: "SIM",
    cancelButtonText: "AINDA NÃO",
    reverseButtons: true,
    allowOutsideClick: false,
  });

  if (result.isConfirmed) showYesPopup();
  else showNoPopup();
}

async function showYesPopup() {
  await Swal.fire({
    title: `<img src="./img/heart.png" style="width:22px;vertical-align:middle;margin-right:6px;">QUE ÓTIMO!`,
    html: `
      <div class="popup-row">
        <img src="./img/in-love.png" alt="in love">
        <div>
          <div class="bubble typing" id="yesText"></div>
          <div id="clownYes" style="display:none;margin-top:6px;">
            <img src="./img/clown.png" alt="clown" style="width:24px;height:auto;vertical-align:middle;">
          </div>
        </div>
      </div>
    `,
    confirmButtonText: "FECHAR",
    allowOutsideClick: false,
    didOpen: async () => {
      const el = document.getElementById("yesText");
      const clown = document.getElementById("clownYes");
      const text = "Fico muito feliz!\n\nP.S.: Me comunique a decisão pois não soube desenvolver um site em que eu pudesse acessá-la.";
      await typeText(el, text, 28, () => {
        clown.style.display = "block";
      });
    }
  });
}

async function showNoPopup() {
  await Swal.fire({
    title: `<img src="./img/hourglass.png" style="width:22px;vertical-align:middle;margin-right:6px;">TUDO BEM!`,
    html: `
      <div class="popup-row">
        <img src="./img/smile.png" alt="smile">
        <div>
          <div class="bubble typing" id="noText"></div>
          <div id="clownNo" style="display:none;margin-top:6px;">
            <img src="./img/clown.png" alt="clown" style="width:24px;height:auto;vertical-align:middle;">
          </div>
        </div>
      </div>
    `,
    confirmButtonText: "FECHAR",
    allowOutsideClick: false,
    didOpen: async () => {
      const el = document.getElementById("noText");
      const clown = document.getElementById("clownNo");
      const text = "Espero que em breve role!\n\nP.S.: Me comunique a decisão pois não soube desenvolver um site em que eu pudesse acessá-la.";
      await typeText(el, text, 28, () => {
        clown.style.display = "block";
      });
    }
  });
}

window.onload = showLoadingPopup;
</script>
</body>
</html>
